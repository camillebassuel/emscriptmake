<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<!-- <meta http-equiv="Cross-Origin-Opener-Policy" content="same-origin" />
<meta http-equiv="Cross-Origin-Embedder-Policy" content="require-corp" /> -->

  <script>
    var Module = {
      onRuntimeInitialized: function() {
        console.log('lerp result: ' + Module.lerp(1, 2, 0.5));

        var instance = new Module.MyClass(10, "hello");
        instance.incrementX();
        instance.x; // 11
        instance.x = 20; // 20
        Module.MyClass.getStringFromInstance(instance); // "hello"

//vectors and map manipulations
        var retVector = Module['returnVectorData']();
// vector size
        var vectorSize = retVector.size();
// reset vector value
        retVector.set(vectorSize - 1, 11);
// push value into vector
        retVector.push_back(12);
// retrieve value from the vector
        for (var i = 0; i < retVector.size(); i++) {
            console.log("Vector Value: ", retVector.get(i));
        }
// expand vector size
        retVector.resize(20, 1);

        var retMap = Module['returnMapData']();

        // map size
        var mapSize = retMap.size();

        // retrieve value from map
        console.log("Map Value: ", retMap.get(10));

        // figure out which map keys are available
        // NB! You must call `register_vector<key_type>`
        // to make vectors available
        var mapKeys = retMap.keys();
        for (var i = 0; i < mapKeys.size(); i++) {
            var key = mapKeys.get(i);
            console.log("Map key/value: ", key, retMap.get(key));
        }

        // reset the value at the given index position
        retMap.set(10, "OtherValue");













        function doSomething() {
            instance.incrementX();
            instance.str ='modified string : '.concat(instance.x) 
            console.log(instance.str)
            console.log(Module.MyClass.getStringFromInstance(instance));
        }
        setInterval(doSomething, 1000);


      },
    };
  </script>
  <script src="cmake-build-emscripten/cpp2wasm.js"></script>

</head>
</html>